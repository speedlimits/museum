<html>

<head>

	<script type="text/javascript" src="js/jquery-1.2.6.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.6.custom.min.js"></script>
    <script type="text/javascript" src="js/ui.coverflow.custom.js"></script> 
    <script type="text/javascript" src="js/sylvester.js"></script> 
    <script type="text/javascript" src="js/pb.transformie.js"></script>
    <script type="text/javascript" src="js/sirikata.main.js"></script>
 	<script type="text/javascript" src="js/sirikata.ui.js"></script>
    <script type="text/javascript" src="js/jquery.selectboxes.min.js"></script>
	<script type="text/javascript" src="js/jquery.geturlparam.js"></script>

<script type="text/javascript">


		function loadScreen(screen, page) { $(screen).load(page).fadeIn("slow"); }
		function hideScreen(screen) {$(screen).fadeOut(); }
		
		
		function setup () {
			loadScreen("#navigation-screen", "screens/navigation.html");	
		}
		
		function curatorMode(mode) {
			var mode = (mode == null) ? 0 : mode;
			
			if (mode == 0) {
				loadScreen("#modal-screen", "screens/curator_welcome.html");
			} else {
				hideScreen("#modal-screen");
				loadScreen("#top-bar", "screens/topbar_curator.html");	
				if (mode == 1) { // art 
					loadScreen("#detail-screen", "screens/curator_art.html");	
				} else if (mode == 2) { // frames 
					loadScreen("#detail-screen", "screens/curator_frames.html");	
				} else if (mode == 3) { // walls 
					loadScreen("#detail-screen", "screens/curator_walls.html");	
				} else if (mode == 4) { // lights 
					loadScreen("#detail-screen", "screens/curator_lights.html");	
				} else if (mode == 5) { // save 
					loadScreen("#detail-screen", "screens/curator_save.html");	
				}
			}
		}
		
function inspect(obj, maxLevels, level)
{
  var str = '', type, msg;

    // Start Input Validations
    // Don't touch, we start iterating at level zero
    if(level == null)  level = 0;

    // At least you want to show the first level
    if(maxLevels == null) maxLevels = 1;
    if(maxLevels < 1)     
        return '<font color="red">Error: Levels number must be > 0</font>';

    // We start with a non null object
    if(obj == null)
    return '<font color="red">Error: Object <b>NULL</b></font>';
    // End Input Validations

    // Each Iteration must be indented
    str += '<ul>';

    // Start iterations for all objects in obj
    for(property in obj)
    {
      try
      {
          // Show "property" and "type property"
          type =  typeof(obj[property]);
          str += '<li>(' + type + ') ' + property + 
                 ( (obj[property]==null)?(': <b>null</b>'):('')) + '</li>';

          // We keep iterating if this property is an Object, non null
          // and we are inside the required number of levels
          if((type == 'object') && (obj[property] != null) && (level+1 < maxLevels))
          str += inspect(obj[property], maxLevels, level+1);
      }
      catch(err)
      {
        // Is there some properties in obj we can't access? Print it red.
        if(typeof(err) == 'string') msg = err;
        else if(err.message)        msg = err.message;
        else if(err.description)    msg = err.description;
        else                        msg = 'Unknown';

        str += '<li><font color="red">(Error) ' + property + ': ' + msg +'</font></li>';
      }
    }

      // Close indent
      str += '</ul>';

    return str;
}

		function critiqueMode(mode, c2) {
			var mode = (mode == null) ? 0 : mode;
			
			try {
				$("body").unbind('sirikata_item_select', pictureSelectedEvent);
				$("body").unbind('sirikata_item_deselect', pictureDeSelectedEvent);
			} catch (err) {}

			if (mode == 0) {
				loadScreen("#modal-screen", "screens/critique_welcome.html");
			} else if (mode == 1) { // load
					loadScreen("#modal-screen", "screens/critique_load_gallery.html");	
			} else {
				hideScreen("#modal-screen");
				loadScreen("#top-bar", "screens/topbar_critique.html");	
				$("body").bind('sirikata_item_select', pictureSelectedEvent);
				$("body").bind('sirikata_item_deselect', pictureDeSelectedEvent);
			
				if (mode == 2) { // walk 
					//loadScreen("#detail-screen", "screens/detail_coverflow.html");	
					hideScreen("#detail-screen");
					
					
				} else if (mode == 3) { // picture 
					//loadScreen("#detail-screen", c2);
					$("#detail-screen").html("<iframe width='90%' height='90%' style='border: none; margin: 16px;' src='http://www.dennisschaaf.com/bornholm/?" + c2 + "&embedded=true'></iframe>").fadeIn("slow");;
				}
			}
		}
		
		function developmentMode() {
			hideScreen("#modal-screen");
			loadScreen("#development-screen", "screens/development.html");	
		}
	
		

		function popUpMessage(text,x,y) {
			$('#popup-message').fadeIn("slow");
			$('#popup-message').html(text);
			$('#popup-message').css('left', x);
			$('#popup-message').css('top', y);
		}
		function hidePopUpMessage() {$('#popup-message').fadeOut("slow");};
		
		
		function debug(msg) {
			$("#development-console").prepend("<br>" + msg );
		}
		
		function pictureSelected(id) {
			if (id == null) {
				$("body").trigger('sirikata_item_select', {item: id});	
			} else {
				$("body").trigger('sirikata_item_deselect');
			}
		}
		
		function pictureSelectedEvent(event, data) {
			debug("selected " + data.item);
			critiqueMode(3, data.item);
				
		}
		function pictureDeSelectEvent(event) {
			debug("items deselected");
			critiqueMode(2);
		}
	
		$(document).ready( function () {
			if ($.getURLParam('mode') == "curator") {
				setTimeout('setup(); loadScreen("#modal-screen", "screens/welcome_curator.html"); ', 1000);
			} else if ($.getURLParam('mode') == "critique") {
				setTimeout('setup(); loadScreen("#modal-screen", "screens/welcome_critique.html"); ', 1000);
			} else {
				setTimeout('setup(); loadScreen("#modal-screen", "screens/welcome.html"); ', 1000);
			}
			 
									 
		});
	</script>
<link href="css/style.css" rel="stylesheet" type="text/css" />
</head>

<body id="body">

<div id="modal-screen" ></div>

<div id="detail-screen"></div>

<div id="top-bar"></div>

<div id="bottom-bar"></div>

<div id="bottom-bar"></div>

<div id="navigation-screen"></div>

<div id="development-screen"></div>

<div id="popup-message"></div>

<div id="drop-screen"></div>

</body>
</html>
    
